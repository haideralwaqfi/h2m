
<nav>
  <div class="navbar navbar-dark bg-dark">
    <div class="container-fluid">
      <h3 style="color: #fff;">Test List</h3>
    </div>
  </div>

  </nav>
  <hr>
  <div class="container" >
      <div class="row" >
          <form class="form-horizontal" action="testlist.php" method="POST">
            <div class="form-group">
              <h3 style="text-align:left;font-weight: bold;">Test Search</h3>
                  <br>
                  <div class="input-group mb-3">
                    <input type="text" class="form-control" name="test_name" id="test_name" placeholder="Test Name" aria-label="Recipient's username" aria-describedby="button-addon2">
                    <div class="input-group-append">
                      <button class="btn btn-primary" type="submit" name="search" id="button-addon2">Search</button>
                    </div>
                  </div>
                  <br>
                  <input class="btn btn-primary" type="submit" name="searchall" id="searchall" value="Search All">
                
              </div>                                    
         </form>
        </div>
      </div>

      <div id="add_data_Modal" class="modal fade">
            
        <div class="modal-dialog">
         <div class="modal-content">
          <div class="modal-header">
           <button type="button" class="close" data-dismiss="modal">&times;</button>
           <h4 class="modal-title">Edit Code</h4>
          </div>
          <div class="modal-body">
           <form method="post" id="insert_form">
                <div id="edir-form"></div>
            <br>
            <input type="submit" name="insert" id="insert" value="Edit" class="btn btn-success" />
           </form>
        
          </div>
          <div class="modal-footer">
           <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          </div>
         </div>
        </div>
       </div> 



      <!-- <div class="res"></div> -->
      <div id="info" class="info" style=" z-index: 1;">
          <div class="table-wrap">
            <table id="test-table"  class="main-table">
              <thead>
                <tr>
                  <th class="fixed-side" scope="col">Test Name</th>
                  <th scope="col" >Sample</th>
                  <th scope="col">Reference Law</th>
                  <th scope="col">Reference High</th>
                  <th scope="col">Copy</th>
                  <th scope="col">Reference Law in MUMPS</th>
                  <th scope="col">Copy</th>
                  <th scope="col">Reference High in MUMPS</th>
                  <th scope="col">Critical Low</th>
                  <th scope="col">Critical High</th>
                  <th scope="col">Copy</th>
                  <th scope="col">Critical Low in MUMPS</th>
                  <th scope="col">Copy</th>
                  <th scope="col">Critical High in MUMPS</th>
                  <th scope="col" >Unit</th>
                  <th scope="col" >Add By</th>
                  <th scope="col">Date</th>
                </tr>
              </thead>

          </div>
         
      </div>
    </div>
  </body>
<script>

    // requires jquery library
$(document).ready(function() {
   $(".main-table").clone(true).appendTo('#info').addClass('clone');
   $('.btn-copy').on('click', function(){
      element = $(this).closest('td').next('td')[0];
      var selection = window.getSelection();        
      var range = document.createRange();
      range.selectNodeContents(element);
      selection.removeAllRanges();
      selection.addRange(range);
      //Losely basd on http://stackoverflow.com/a/40734974/7668911
        try {
          var successful = document.execCommand('copy');
          if(successful) {
            $('.res').html("Coppied");
          }
          else
          { $('.res').html("Unable to copy!");} 
      } catch (err) {
          $('.res').html(err);
      }
    });   

    
});
$(document).ready(function() {
  $('#test-table').on('click', 'tr', function() {
     //get row contents into an array
     var tableData = $(this).children("th").map(function() {
                            return $(this).text();
                        }).get();
                        var id= tableData[0];
                        $.ajax({
                            url: "edit.php",
                            method: "POST",
                            data: {
                                search_post_btn: 1,
                                test_name: id
                            },
                            dataType: "text",
                            success: function(response) {
                                $("#edir-form").html(response);
                                $("#test_name").val(id);
                            }
                            });
                    });                   
});

$(document).ready(function() {
    $("#insert_form").on("submit", function(event) {
      event.preventDefault();
        $.ajax({
          url: "insert_code.php",
          method: "POST",
          data: $("#insert_form").serialize(),
          beforeSend: function() {
            $("#insert").val("Inserting");
          },
          success: function(data) {
            $("#insert_form")[0].reset();
            $("#add_data_Modal").modal("hide");
            $("#dtest-table").html(data);
            $('#button-addon2').trigger('click');
          }
        });
    });
  });


</script>

</html>
